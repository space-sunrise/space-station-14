using Content.Client.Message;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client._Sunrise.StatsBoard;

[GenerateTypedNameReferences]
public sealed partial class StatsEntry : BoxContainer
{
    public StatsEntry(string entityName, float takeDamage, float takeHeal, float inflictedDamage, float inflictedHeal,
        float slippedCount, float creamedCount, float doorEmagedCount, float electrocutedCount, float cuffedCount,
        float absorbedPuddleCount, int spentTk, float deadCount, float humanoidKillCount, float killedMouseCount,
        TimeSpan cuffedTime, TimeSpan spaceTime, TimeSpan sleepTime, string interactedCaptainCard)
    {
        RobustXamlLoader.Load(this);
        IoCManager.InjectDependencies(this);

        NameLabel.SetMarkup($"{entityName}");
        var statsText = "";

        if (takeDamage > 0)
            statsText += $"Получил урона: {takeDamage}\n";
        if (takeHeal > 0)
            statsText += $"Получил лечения: {takeHeal}\n";
        if (inflictedDamage > 0)
            statsText += $"Нанес урона: {inflictedDamage}\n";
        if (inflictedHeal > 0)
            statsText += $"Вылечил урона: {inflictedHeal}\n";
        if (slippedCount > 0)
            statsText += $"Подскользнулся {slippedCount} раз\n";
        if (creamedCount > 0)
            statsText += $"Кремирован {creamedCount} раз\n";
        if (doorEmagedCount > 0)
            statsText += $"Емагнул {doorEmagedCount} дверей\n";
        if (electrocutedCount > 0)
            statsText += $"Шокирован {electrocutedCount} раз\n";
        if (cuffedCount > 0)
            statsText += $"Закован {cuffedCount} раз\n";
        if (absorbedPuddleCount > 0)
            statsText += $"Убрано {absorbedPuddleCount} луж\n";
        if (spentTk > 0)
            statsText += $"Потрачено {spentTk} ТК\n";
        if (deadCount > 0)
            statsText += $"Погиб {deadCount} раз\n";
        if (humanoidKillCount > 0)
            statsText += $"Убил {humanoidKillCount} гуманоидов\n";
        if (killedMouseCount > 0)
            statsText += $"Убито мышей {killedMouseCount}\n";
        if (cuffedTime > TimeSpan.Zero)
            statsText += $"Был в наручниках [color=yellow]{cuffedTime.ToString("hh\\:mm\\:ss")}[/color]\n";
        if (spaceTime > TimeSpan.Zero)
            statsText += $"Был в космосе [color=yellow]{spaceTime.ToString("hh\\:mm\\:ss")}[/color]\n";
        if (sleepTime > TimeSpan.Zero)
            statsText += $"Проспал [color=yellow]{sleepTime.ToString("hh\\:mm\\:ss")}[/color]\n";

        statsText += $"Трогал карту капитана: {interactedCaptainCard}";

        StatsLabel.SetMarkup($"{statsText}");
    }
}
